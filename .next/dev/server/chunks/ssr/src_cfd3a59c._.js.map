{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/Frontend%20Projects/E-Commerce/src/components/DashboardGuard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useAuth } from '@/providers/AuthProvider';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useEffect } from 'react';\r\n\r\ninterface DashboardGuardProps {\r\n  children: React.ReactNode;\r\n  allowedRoles?: ('admin' | 'seller' | 'customer')[];\r\n}\r\n\r\nexport default function DashboardGuard({ children, allowedRoles }: DashboardGuardProps) {\r\n  const { profile, loading } = useAuth();\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    if (!loading) {\r\n      if (!profile) {\r\n        router.push('/login');\r\n      } else if (allowedRoles && !allowedRoles.includes(profile.role)) {\r\n        router.push('/'); // Redirect unauthorized to home\r\n      }\r\n    }\r\n  }, [profile, loading, router, allowedRoles]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen bg-gray-50\">\r\n        <div className=\"flex flex-col items-center gap-4\">\r\n          <div className=\"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin\" />\r\n          <p className=\"text-sm font-black text-gray-400 uppercase tracking-widest\">Verifying Access...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!profile || (allowedRoles && !allowedRoles.includes(profile.role))) {\r\n    return null;\r\n  }\r\n\r\n  return <>{children}</>;\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAWe,SAAS,eAAe,EAAE,QAAQ,EAAE,YAAY,EAAuB;IACpF,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,IAAA,4IAAO;IACpC,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,SAAS;YACZ,IAAI,CAAC,SAAS;gBACZ,OAAO,IAAI,CAAC;YACd,OAAO,IAAI,gBAAgB,CAAC,aAAa,QAAQ,CAAC,QAAQ,IAAI,GAAG;gBAC/D,OAAO,IAAI,CAAC,MAAM,gCAAgC;YACpD;QACF;IACF,GAAG;QAAC;QAAS;QAAS;QAAQ;KAAa;IAE3C,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAA6D;;;;;;;;;;;;;;;;;IAIlF;IAEA,IAAI,CAAC,WAAY,gBAAgB,CAAC,aAAa,QAAQ,CAAC,QAAQ,IAAI,GAAI;QACtE,OAAO;IACT;IAEA,qBAAO;kBAAG;;AACZ"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///E:/Frontend%20Projects/E-Commerce/src/app/dashboard/layout.tsx"],"sourcesContent":["'use client';\r\nimport Link from 'next/link';\r\nimport React, { useState } from 'react';\r\nimport { usePathname } from 'next/navigation';\r\nimport { LayoutDashboard, ShoppingBag, Store, Image, List, Users, LogOut } from 'lucide-react';\r\nimport { useAuth } from '@/providers/AuthProvider';\r\nimport DashboardGuard from '@/components/DashboardGuard';\r\n\r\nconst sidebarItems = [\r\n  { name: 'Overview', href: '/dashboard', icon: LayoutDashboard, roles: ['admin', 'seller', 'customer'] },\r\n  { name: 'My Orders', href: '/dashboard/orders', icon: ShoppingBag, roles: ['seller', 'customer'] }, // Sellers see shop orders, customers see purchase orders\r\n  { name: 'Products', href: '/dashboard/products', icon: ShoppingBag, roles: ['admin', 'seller'] },\r\n  { name: 'Shops', href: '/dashboard/shops', icon: Store, roles: ['admin'] },\r\n  { name: 'Categories', href: '/dashboard/categories', icon: List, roles: ['admin'] },\r\n  { name: 'Banners', href: '/dashboard/banners', icon: Image, roles: ['admin'] },\r\n  { name: 'Users', href: '/dashboard/users', icon: Users, roles: ['admin'] },\r\n];\r\n\r\nexport default function DashboardLayout({ children }: { children: React.ReactNode }) {\r\n  const pathname = usePathname();\r\n  const { profile, logout } = useAuth();\r\n  const [isSidebarOpen, setIsSidebarOpen] = React.useState(false);\r\n\r\n  const filteredItems = sidebarItems.filter(item => \r\n    profile && item.roles.includes(profile.role)\r\n  );\r\n  \r\n  return (\r\n    <DashboardGuard allowedRoles={['admin', 'seller', 'customer']}>\r\n      <div className=\"flex min-h-screen bg-gray-50/50 pt-16\">\r\n        {/* Mobile Sidebar Overlay */}\r\n        {isSidebarOpen && (\r\n          <div \r\n            className=\"fixed inset-0 bg-black/50 z-30 lg:hidden\"\r\n            onClick={() => setIsSidebarOpen(false)}\r\n          />\r\n        )}\r\n\r\n        {/* Mobile Menu Toggle (Only visible on mobile) */}\r\n        {!isSidebarOpen && (\r\n          <button\r\n            onClick={() => setIsSidebarOpen(true)}\r\n            className=\"fixed left-4 top-20 z-30 p-2 bg-white rounded-lg shadow-md lg:hidden\"\r\n          >\r\n            <LayoutDashboard className=\"h-6 w-6 text-gray-700\" />\r\n          </button>\r\n        )}\r\n\r\n        {/* Sidebar */}\r\n        <aside className={`fixed left-0 top-16 h-[calc(100vh-4rem)] w-72 bg-white border-r border-gray-100 flex flex-col z-40 transition-transform duration-300 lg:translate-x-0 ${\r\n          isSidebarOpen ? 'translate-x-0' : '-translate-x-full'\r\n        }`}>\r\n          <div className=\"p-8 relative\">\r\n            {/* Close Button (Mobile) */}\r\n            <button \r\n              onClick={() => setIsSidebarOpen(false)}\r\n              className=\"absolute right-4 top-4 p-1 text-gray-400 hover:text-gray-600 lg:hidden\"\r\n            >\r\n              <LogOut className=\"h-5 w-5 rotate-180\" /> {/* Reusing LogOut icon as back/close temporarily if X not imported, or add X import */}\r\n            </button>\r\n\r\n            <div className=\"flex items-center gap-3 mb-2\">\r\n              <div className=\"size-10 rounded-2xl bg-blue-600 flex items-center justify-center text-white font-black shadow-lg shadow-blue-500/20\">SN</div>\r\n              <h1 className=\"text-xl font-black text-gray-900 tracking-tight\">ShopNest <span className=\"text-blue-600\">Dash</span></h1>\r\n            </div>\r\n            {profile && (\r\n              <div className=\"mt-6 p-4 rounded-2xl bg-gray-50 border border-gray-100\">\r\n                <p className=\"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-1\">Authenticated as</p>\r\n                <p className=\"text-sm font-black text-gray-900 truncate\">{profile.name || 'Admin User'}</p>\r\n                <div className=\"inline-flex items-center px-2 py-0.5 rounded-full bg-blue-100 text-blue-700 text-[10px] font-black uppercase tracking-wider mt-1\">\r\n                  {profile.role}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <nav className=\"flex-1 px-4 overflow-y-auto\">\r\n            <div className=\"space-y-1\">\r\n              {filteredItems.map((item) => (\r\n                <Link\r\n                  key={item.href}\r\n                  href={item.href}\r\n                  onClick={() => setIsSidebarOpen(false)} // Close sidebar on link click (mobile)\r\n                  className={`flex items-center px-4 py-3.5 text-sm font-bold rounded-2xl transition-all group ${\r\n                    pathname === item.href\r\n                      ? 'bg-blue-600 text-white shadow-xl shadow-blue-600/20'\r\n                      : 'text-gray-500 hover:bg-gray-50 hover:text-blue-600'\r\n                  }`}\r\n                >\r\n                  <item.icon className={`mr-3 h-5 w-5 transition-transform group-hover:scale-110 ${\r\n                    pathname === item.href ? 'text-white' : 'text-gray-400 group-hover:text-blue-600'\r\n                  }`} />\r\n                  {item.name}\r\n                </Link>\r\n              ))}\r\n            </div>\r\n          </nav>\r\n\r\n          <div className=\"p-4 mt-auto border-t border-gray-100\">\r\n            <button \r\n              onClick={logout}\r\n              className=\"flex items-center w-full px-4 py-4 text-sm font-bold text-red-500 rounded-2xl hover:bg-red-50 transition-all group\"\r\n            >\r\n              <LogOut className=\"mr-3 h-5 w-5 transition-transform group-hover:-translate-x-1\" />\r\n              Sign Out\r\n            </button>\r\n          </div>\r\n        </aside>\r\n\r\n        {/* Main Content */}\r\n        <main className=\"flex-1 lg:pl-72 transition-all duration-300\">\r\n          <div className=\"min-h-screen p-4 sm:p-8 lg:p-12 max-w-7xl mx-auto\">\r\n            {children}\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </DashboardGuard>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}