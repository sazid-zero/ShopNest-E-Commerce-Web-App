(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,793479,e=>{"use strict";var t=e.i(843476),s=e.i(975157);function a({className:e,type:a,...r}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,s.cn)("border-input file:text-foreground placeholder:text-muted-foreground/70 flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-sm shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive","search"===a&&"[&::-webkit-search-cancel-button]:appearance-none [&::-webkit-search-decoration]:appearance-none [&::-webkit-search-results-button]:appearance-none [&::-webkit-search-results-decoration]:appearance-none","file"===a&&"text-muted-foreground/70 file:border-input file:text-foreground p-0 pr-3 italic file:me-3 file:h-full file:border-0 file:border-r file:border-solid file:bg-transparent file:px-3 file:text-sm file:font-medium file:not-italic",e),...r})}e.s(["Input",()=>a])},373488,e=>{"use strict";let t=(0,e.i(475254).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["default",()=>t])},555436,e=>{"use strict";var t=e.i(54943);e.s(["Search",()=>t.default])},918549,e=>{"use strict";let t=(0,e.i(475254).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["default",()=>t])},136166,e=>{"use strict";let t=(0,e.i(475254).default)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["default",()=>t])},581418,e=>{"use strict";var t=e.i(136166);e.s(["ShieldCheck",()=>t.default])},768214,e=>{"use strict";let t=(0,e.i(475254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["default",()=>t])},263488,e=>{"use strict";var t=e.i(768214);e.s(["Mail",()=>t.default])},98919,e=>{"use strict";var t=e.i(918549);e.s(["Shield",()=>t.default])},54020,e=>{"use strict";var t=e.i(843476),s=e.i(271645),a=e.i(761911),r=e.i(263488),l=e.i(98919),i=e.i(581418),n=e.i(284614),c=e.i(555436),d=e.i(373488),d=d,o=e.i(959141);e.i(151718);var x=e.i(441264),u=e.i(519455),h=e.i(793479),p=e.i(337822);function m(){let[e,m]=(0,s.useState)([]),[f,b]=(0,s.useState)(!0),[g,y]=(0,s.useState)(""),[j,v]=(0,s.useState)(null),N=async e=>{try{let t=await fetch("/api/users",{headers:{Authorization:`Bearer ${e}`}}),s=await t.json();Array.isArray(s)&&m(s)}catch(e){console.error("Failed to fetch users:",e)}finally{b(!1)}};(0,s.useEffect)(()=>{let e=(0,x.onAuthStateChanged)(o.auth,e=>{e?e.getIdToken().then(N):b(!1)});return()=>e()},[]);let w=async(t,s)=>{v(t);try{let a=await o.auth.currentUser?.getIdToken();(await fetch("/api/users",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({userId:t,role:s})})).ok&&m(e.map(e=>e.id===t?{...e,role:s}:e))}catch(e){console.error("Failed to update role:",e)}finally{v(null)}},k=e.filter(e=>e.name?.toLowerCase().includes(g.toLowerCase())||e.email?.toLowerCase().includes(g.toLowerCase()));return f?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-black text-gray-900 tracking-tight",children:"User Management"}),(0,t.jsx)("p",{className:"text-sm font-bold text-gray-400 mt-1",children:"Manage user permissions and access levels"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(c.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-gray-400"}),(0,t.jsx)(h.Input,{placeholder:"Search by name or email...",value:g,onChange:e=>y(e.target.value),className:"pl-10 w-80 rounded-2xl border-gray-100 bg-white shadow-sm focus:ring-blue-500"})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-3xl border border-gray-100 shadow-sm overflow-hidden",children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gray-50/50",children:[(0,t.jsx)("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"User"}),(0,t.jsx)("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Role"}),(0,t.jsx)("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Joined At"}),(0,t.jsx)("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-right",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-50",children:k.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"size-10 rounded-2xl bg-linear-to-tr from-blue-500/10 to-purple-500/10 flex items-center justify-center text-blue-600 font-black border border-blue-500/5",children:e.name?.[0]||e.email?.[0]?.toUpperCase()}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-black text-gray-900",children:e.name||"Anonymous"}),(0,t.jsxs)("p",{className:"text-[10px] font-bold text-gray-400 flex items-center gap-1",children:[(0,t.jsx)(r.Mail,{className:"size-3"})," ",e.email]})]})]})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider ${"admin"===e.role?"bg-purple-100 text-purple-700":"seller"===e.role?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:["admin"===e.role?(0,t.jsx)(i.ShieldCheck,{className:"size-3"}):"seller"===e.role?(0,t.jsx)(l.Shield,{className:"size-3"}):(0,t.jsx)(n.User,{className:"size-3"}),e.role]})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("p",{className:"text-xs font-bold text-gray-500",children:new Date(e.created_at).toLocaleDateString()})}),(0,t.jsx)("td",{className:"px-6 py-4 text-right",children:(0,t.jsxs)(p.Popover,{children:[(0,t.jsx)(p.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(u.Button,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0 rounded-xl hover:bg-white border border-transparent hover:border-gray-100 shadow-sm",disabled:j===e.id,children:(0,t.jsx)(d.default,{className:"size-4 text-gray-400"})})}),(0,t.jsx)(p.PopoverContent,{align:"end",className:"w-48 p-2 rounded-2xl border-0 shadow-2xl bg-white/95 backdrop-blur-md",children:(0,t.jsxs)("div",{className:"p-2",children:[(0,t.jsx)("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Change Role To"}),(0,t.jsxs)("button",{onClick:()=>w(e.id,"admin"),className:"flex items-center gap-3 w-full p-2.5 rounded-xl text-sm font-bold text-gray-600 hover:bg-gray-50 transition-colors",children:[(0,t.jsx)(i.ShieldCheck,{className:"size-4 text-purple-500"})," Admin"]}),(0,t.jsxs)("button",{onClick:()=>w(e.id,"seller"),className:"flex items-center gap-3 w-full p-2.5 rounded-xl text-sm font-bold text-gray-600 hover:bg-gray-50 transition-colors",children:[(0,t.jsx)(l.Shield,{className:"size-4 text-blue-500"})," Seller"]}),(0,t.jsxs)("button",{onClick:()=>w(e.id,"customer"),className:"flex items-center gap-3 w-full p-2.5 rounded-xl text-sm font-bold text-gray-600 hover:bg-gray-50 transition-colors",children:[(0,t.jsx)(n.User,{className:"size-4 text-gray-400"})," Customer"]})]})})]})})]},e.id))})]})}),0===k.length&&(0,t.jsxs)("div",{className:"text-center py-24",children:[(0,t.jsx)("div",{className:"size-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(a.Users,{className:"size-8 text-gray-300"})}),(0,t.jsx)("p",{className:"text-gray-500 font-bold",children:"No users found"})]})]})]})}e.s(["default",()=>m],54020)}]);